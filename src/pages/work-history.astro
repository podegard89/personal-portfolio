---
import Layout from "../layouts/Layout.astro";
// import Card from '../components/Card.astro';
import * as navItem from "../content/nav-items/2-work-history.md";

const { title, subHeading } = navItem.frontmatter;
const jobEntries = await Astro.glob("../content/job-entries/*.md");
---

<Layout title={title} subHeading={subHeading}>
  <main>
    <div class="timeline-container">
      {
        jobEntries.map((jobEntry, index) => {
          return (
            <>
              <div class="job-entry">
                <div class="heading-container">
                  <div class="sub-heading-container">
                    <h2 class="heading-label">Role</h2>
                    <h2 id="role" class="heading-content">
                      {jobEntry.frontmatter.title}
                    </h2>
                  </div>
                  <div class="sub-heading-container">
                    <h2 class="heading-label">Employer</h2>
                    <p id="employer" class="heading-content">
                      {jobEntry.frontmatter.employer}
                    </p>
                  </div>
                  <div class="sub-heading-container">
                    <h2 class="heading-label">Course Name</h2>
                    <p id="course-name" class="heading-content">
                      {jobEntry.frontmatter.courseName}
                    </p>
                  </div>
                  <div class="sub-heading-container">
                    <h2 class="heading-label">Duration</h2>
                    <p id="date-range" class="heading-content">
                      {jobEntry.frontmatter.startDate} -{" "}
                      {jobEntry.frontmatter.endDate}
                    </p>
                  </div>
                </div>
                <p
                  class="job-description"
                  set:html={jobEntry.compiledContent()}
                />
              </div>
              {index < jobEntries.length - 1 && (
                <div class="timeline-divider" />
              )}
            </>
          );
        })
      }
    </div>
  </main>
</Layout>

<style>
  main {
    margin: auto;
    padding: 1rem;
    width: 1200px;
    max-width: calc(100% - 2rem);
    color: white;
    font-size: 20px;
    line-height: 1.6;
  }
  .timeline-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: "VulfSansDemo", sans-serif;
  }

  .heading-container {
    display: flex;
    flex-direction: row;
    justify-content: center;
    /* gap: 1rem; */
    align-items: center;
  }
  .sub-heading-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 0;
    align-items: center;
  }
  .heading-label {
    text-align: left;
    margin-bottom: 0;
  }
  .heading-content {
    text-align: left;
    margin-top: 0.5rem;
    margin-bottom: 0;
  }
  #role {
    background-color: rgb(var(--accent));
    padding: 1rem;
  }
  #employer {
    background-color: rgb(var(--accent-light));

    padding: 1rem;
  }
  #course-name {
    background-color: rgb(var(--accent));
    padding: 1rem;
  }
  #date-range {
    background-color: rgb(var(--accent-light));
    padding: 1rem;
  }

  .job-entry {
    border: 6px solid;
    border-image: var(--accent-gradient);
    border-image-slice: 1;
    border-radius: 20px;
    background-origin: border-box;
    background-clip: content-box, border-box;
    padding: 1rem;
  }
  .job-description {
    font-family: "VulfSansDemo", sans-serif;
  }
  :global(p > a) {
    text-decoration: none;
    color: #333;
    position: relative; /* Needed for the underline animation */
    border-bottom: 2px solid transparent; /* Transparent border by default */
    transition:
      color 0.3s,
      border-color 0.3s; /* Add smooth transitions */
    font-weight: bold;
  }
  :global(p > a:hover) {
    color: rgb(var(--accent));
    border-bottom-color: rgb(var(--accent));
  }
  .timeline-divider {
    width: 6px; /* Adjust the thickness of the line as needed */
    height: 5rem; /* Adjust the height of the line as needed */
    background-image: var(
      --accent-gradient-reverse
    ); /* Adjust the color as needed */
  }
</style>
